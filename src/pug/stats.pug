div.cp-2020__stats
  h3.cp-2020__stats__view-title
    div STATS
    div.cp-2020__stats__character-points
      label(for='CharacterPoints_Base') Character Points
      input(type='number' name='attr_CharacterPoints_Base' id='CharacterPoints_Base' min='18' max='90')
      label(for='attr_CharacterPoints_Base') Base
      input(type='number' name='attr_CharacterPoints' disabled='true' value=`@{INT_Base}+@{REF_Base}+@{TECH_Base}+@{COOL_Base}+@{ATTR_Base}+@{LUCK_Base}+@{MA_Base}+@{BODY_Base}+@{EMP_Base}`)
      label(for='attr_CharacterPoints') Used
      input(type='number' name='attr_CharacterPoints_Left' disabled='true' value=`(@{CharacterPoints}-@{CharacterPoints_Base})*-1`)
      label(for='attr_CharacterPoints_Left') Remaining

  input(type='hidden' value='1' name='attr_Wound_Divisor')
  input(type='hidden' value='0' name='attr_Wound_Ref_Mod')
  div.cp-2020__layout--row-1-1
    each name, stat in data.stats
      +box.cp-2020__stat
        div.cp-2020__layout--row-3-1
          label(for=`attr_${stat}_Base`)
            div.cp-2020__stat__name=name
            div.cp-2020__stat__total
              if stat === 'INT' || stat === 'COOL'
                input(type='number' disabled='true' name=`attr_${stat}` value=`round((@{${stat}_Mod}+@{${stat}_Base})/@{Wound_Divisor})`)
              else if stat === 'REF'
                input(type='number' disabled='true' name=`attr_${stat}` value=`round((@{${stat}_Mod}+@{${stat}_Base}-@{Wound_Ref_Mod})/@{Wound_Divisor})`)
              else
                input(type='number' disabled='true' name=`attr_${stat}` value=`@{${stat}_Mod}+@{${stat}_Base}`)
              span.cp-2020__stat__abbr=`[${stat}]`
          div.cp-2020__layout--col-1-1
            button.cp-2020__stat__check-btn(type='roll' title=`roll ${name} check` value=`&{template:general} {{roll=@{Handle} ^{rolls} ^{${stat}} [[1d10!! + [[@{${stat}}]] ]]}}`)
            button.cp-2020__stat__save-btn(type='roll' title=`roll ${name} save` value=`'&{template:general} {{roll=@{Handle} ^{rolls} ^{save}! [[1d10]] ^{${stat}}: [[@{Body}]]}}'`)
        div(class='cp-2020__layout--row-1-1 cp-2020__stat__breakdown')
          div
            input(type='number' id=`attr_${stat}_Base` name=`attr_${stat}_Base` min='2' max='10')
            span.cp-2020__stat__key--value base
          div
            input(type='number' name=`attr_${stat}_Mod` value='0')
            span.cp-2020__stat__key--value modifier
          div
            input(type='number' disabled='true' name=`attr_${stat}` value=`@{${stat}}-@{${stat}_Base}`)
            span.cp-2020__stat__key--value dam. mod.

    +box.cp-2020__stat
      label(for='attr_Humanity')
        span.cp-2020__stat__name humanity
        input.cp-2020__stat__total-composite(type='number' disabled='true' name='attr_Humanity' value='((@{EMP_Base}-@{EMP_Mod})*10)-@{Humanity_loss}')


    +box.cp-2020__stat
      label(for='attr_Humanity_loss')
        span.cp-2020__stat__name humanity loss
        input.cp-2020__stat__total-composite(type='number' disabled='true' name='attr_Humanity_loss' value='0')


    +box.cp-2020__stat
      label(for='attr_Run')
        span.cp-2020__stat__name run
        input.cp-2020__stat__total-composite(type='number' disabled='true' name='attr_Run' value='(@{MA_Base}-@{MA_Mod})*3')


    +box.cp-2020__stat
      label(for='attr_Leap')
        span.cp-2020__stat__name leap
        input.cp-2020__stat__total-composite(type='number' disabled='true' name='attr_Leap' value='round(((@{MA_Base}-@{MA_Mod})*3)/4)')


    +box.cp-2020__stat
      label(for='attr_Carry')
        span.cp-2020__stat__name carry
        input.cp-2020__stat__total-composite(type='number' disabled='true' name='attr_Carry' value='(@{BODY_Base}-@{BODY_Mod})*10')


    +box.cp-2020__stat
      label(for='attr_Lift')
        span.cp-2020__stat__name lift
        input.cp-2020__stat__total-composite(type='number' disabled='true' name='attr_Lift' value='(@{BODY_Base}-@{BODY_Mod})*40')
